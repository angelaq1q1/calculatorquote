<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>From 68% to 90% – Free Grade Predictor & GPA Calculator</title>
    <meta name="description" content="Missed your midterm goals? Use our free Grade Predictor to calculate the exact score you need on your final to reach your target GPA. Plan your comeback today!">
    <link href="https://fonts.googleapis.com/css?family=Raleway:300,400,500,600,700" rel="stylesheet">
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/font-awesome.min.css" rel="stylesheet">
    <link href="../css/templatemo-style.css" rel="stylesheet">
    <style>
        /* Ensure Raleway font is applied to all elements */
        body, *, input, select, button, textarea {
            font-family: 'Raleway', sans-serif !important;
        }
        
        .calculator-container {
            max-width: 800px;
            margin: 0 auto;
            background: #fff;
            border-radius: 2px;
            box-shadow: 0 2px 8px 0 rgba(50, 50, 50, 0.08);
            padding: 40px 32px 36px 32px;
            text-align: left;
        }
        
        .main-content-wrapper {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .content-area {
            flex: 1;
            max-width: 800px;
        }
        
        .breadcrumb {
            margin-bottom: 24px;
            font-size: 16px;
            color: #606060;
            text-align: left;
        }
        
        .breadcrumb a {
            color: #eb5424;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .breadcrumb a:hover {
            color: #d4441a;
        }
        
        .breadcrumb span {
            color: #606060;
            margin: 0 8px;
        }
        
        .page-title {
            font-size: 1.5em;
            font-weight: 300;
            color: #303030;
            margin-bottom: 40px;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-align: left;
        }
        
        .page-description {
            color: #606060;
            font-size: 16px;
            line-height: 28px;
            margin-bottom: 40px;
            text-align: left;
        }

        .input-section {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            width: 100%;
            max-width: 600px;
            border: 1px solid #e0e0e0;
            margin-bottom: 40px;
            margin: 0 auto 40px auto;
            text-align: left;
        }

        .grade-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        .grade-table th, .grade-table td {
            padding: 10px;
            border-bottom: 1px solid #e0e0e0;
            text-align: left;
        }
        .grade-table th {
            color: #eb5424;
            font-weight: 500;
            background: #f8f9fa;
        }
        .grade-table td input, .grade-table td select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
            font-family: 'Raleway', sans-serif;
        }
        .grade-table td select {
            min-width: 70px;
        }
        .buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            max-width: 400px;
            margin: 25px auto 0 auto;
        }
        .btn-calculate {
            background-color: #eb5424;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-family: 'Raleway', sans-serif;
            transition: background-color 0.3s;
        }
        .btn-calculate:hover {
            background-color: #d43d1a;
        }
        .btn-clear {
            background-color: #f5c6cb;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-family: 'Raleway', sans-serif;
            transition: background-color 0.3s;
        }
        .btn-clear:hover {
            background-color: #f1aeb5;
        }
        .btn-add {
            background-color: #ff7a4d;
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 15px;
            font-family: 'Raleway', sans-serif;
            margin-bottom: 10px;
            transition: background-color 0.3s;
        }
        .btn-add:hover {
            background-color: #ff6b3a;
        }
        .result-section {
            margin-top: 30px;
            padding: 20px;
            display: none;
        }

        .result-section h2 {
            color: #d4441a;
            margin-bottom: 15px;
        }

        .result-section p {
            font-size: 16px;
            color: #606060;
            margin-bottom: 10px;
            line-height: 28px;
        }
        
        .result-section .value {
            color: #eb5424;
            font-weight: 500;
            margin-left: 8px;
        }

        .tab-btn {
            font-size: 1em;
            padding: 10px 22px;
            border: none;
            border-radius: 6px;
            margin-right: 20px;
            background: #f8f9fa;
            color: #eb5424;
            cursor: pointer;
            font-family: 'Raleway', sans-serif;
            transition: background 0.2s, color 0.2s;
        }
        .tab-btn.active {
            background: #eb5424;
            color: #fff;
        }
        .tab-btn:last-child {
            margin-right: 0;
        }
        .grade-type-segment {
            display: inline-flex;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 2px rgba(235, 84, 36, 0.04);
            margin-bottom: 18px;
        }
        .grade-type-segment button {
            border: none;
            outline: none;
            background: #fff;
            color: #eb5424;
            font-size: 1em;
            font-weight: 500;
            padding: 10px 28px;
            cursor: pointer;
            font-family: 'Raleway', sans-serif;
            transition: background 0.2s, color 0.2s;
        }
        .grade-type-segment button:not(:last-child) {
            border-right: 1px solid #f8f9fa;
        }
        .grade-type-segment button.active {
            background: #eb5424;
            color: #fff;
            z-index: 1;
        }
        .grade-type-segment button:hover:not(.active) {
            background: #f8f9fa;
        }
        #section-gpa .grade-table input,
        #section-gpa .grade-table select {
            border-radius: 8px !important;
            border: 1.5px solid #ddd !important;
            background: #fff !important;
            font-size: 1.08em !important;
            padding: 10px 12px !important;
            margin-bottom: 0 !important;
            box-sizing: border-box !important;
        }
        #section-gpa .grade-table th {
            background: #f8f9fa !important;
            color: #eb5424 !important;
            font-weight: 700 !important;
            font-size: 1.13em !important;
            border: none !important;
        }
        #section-gpa .grade-table tr:not(:last-child) {
            border-bottom: 2px solid #f0f0f0 !important;
        }

        .content-section {
            color: #606060;
            font-size: 16px;
            line-height: 28px;
            text-align: left;
            padding: 30px;
            background: transparent;
            margin-top: 40px;
            border-top: none;
        }
        
        .content-section h2, .content-section h3 {
            color: #000000;
            font-size: 20px;
            font-weight: normal;
            letter-spacing: 1px;
            margin-top: 40px;
            margin-bottom: 20px;
            padding-bottom: 10px;
        }
        
        .content-section ul {
            margin-left: 1.2em;
            margin-bottom: 1em;
        }
        
        .content-section li {
            margin-bottom: 0.5em;
        }
        
        .content-section a {
            color: #eb5424;
            text-decoration: none;
        }
        
        .content-section a:hover {
            color: #d4441a;
        }

        @media (max-width: 768px) {
            .main-content-wrapper {
                padding: 0 10px;
            }
        }

        @media (max-width: 600px) {
            .calculator-container {
                padding: 24px 20px;
            }
            .page-title {
                font-size: 1.2em;
            }
            .content-section {
                font-size: 14px;
            }
            .buttons {
                grid-template-columns: 1fr;
                gap: 12px;
                max-width: 100%;
            }
        }
    </style>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "From 68% to 90% – Free Grade Predictor & GPA Calculator",
      "url": "https://www.calculatorquote.com/grade-calculator.html",
      "description": "Missed your midterm goals? Use our free Grade Predictor to calculate the exact score you need on your final to reach your target GPA. Plan your comeback today!",
      "inLanguage": "en-US",
      "keywords": "uab grade calculator, 3.3 gpa letter grade, 46 questions to make a 70 percent, average hs gpa, weighted average mark calculator, gpa calculator with weights, weighted mark calculator, how to calculate weighted average for grades",
      "mainEntity": {
        "@type": "SoftwareApplication",
        "name": "Grade Calculator",
        "operatingSystem": "All",
        "applicationCategory": "EducationApplication",
        "offers": {
          "@type": "Offer",
          "price": "0.00",
          "priceCurrency": "USD"
        }
      },
      "publisher": {
        "@type": "Organization",
        "name": "CalculatorQuote",
        "url": "https://www.calculatorquote.com",
        "logo": {
          "@type": "ImageObject",
          "url": "https://www.calculatorquote.com/logo.png"
        }
      }
    }
    </script>
</head>
<body>
    <!-- START NAVIGATION -->
    <nav class="navbar navbar-default" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon icon-bar"></span>
                    <span class="icon icon-bar"></span>
                    <span class="icon icon-bar"></span>
                </button>
                <a href="../index.html" class="navbar-brand">CalculatorQuote</a>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="../index.html" class="smoothScroll">Home</a></li>
                    <li><a href="../math/basic-calculator.html" class="smoothScroll">Math</a></li>
                    <li><a href="../financial/index.html" class="smoothScroll">Financial</a></li>
                    <li><a href="../health/index.html" class="smoothScroll">Health</a></li>
                    <li><a href="../home/index.html" class="smoothScroll">Home & Garden</a></li>
                    <li><a href="../pet/index.html" class="smoothScroll">Pet</a></li>
                    <li><a href="../sports/index.html" class="smoothScroll">Sports</a></li>
                    <li><a href="date-calculator.html" class="smoothScroll">Other</a></li>
                    <li style="display: none;"><a href="../blog/index.html" class="smoothScroll">Blog</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- END NAVIGATION -->

    <!-- START GRADE CALCULATOR -->
    <section class="tm-padding-top-bottom-100" style="padding-top: 0; padding-bottom: 0.5px; background: #fff;">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="main-content-wrapper">
                        <div class="content-area">
                            <div class="calculator-container">
                        <div class="breadcrumb">
                            <a href="../index.html">Home</a>
                            <span>/</span>
                            <a href="index.html">Other Calculators</a>
                            <span>/</span>
                            Grade Calculator
                        </div>

                        <div class="page-title">From 68% to 90%: Plan Your Comeback with Our Grade Predictor</div>
                        
                        <div class="page-description">
                            Missed your midterm goals? Use our free Grade Calculator to see exactly what you need on the final to reach your target GPA. Take control and plan your academic comeback today.
                        </div>
                        
                        <div style="display:flex;gap:20px;margin-bottom:32px;flex-wrap:wrap;">
                            <button onclick="showSection('grade')" id="tab-grade" class="tab-btn active">Grade Calculator</button>
                            <button onclick="showSection('final')" id="tab-final" class="tab-btn">Final Grade Calculator</button>
                            <button onclick="showSection('gpa')" id="tab-gpa" class="tab-btn">GPA Calculator</button>
                        </div>

        <!-- Grade Calculator Section -->
        <div id="section-grade">
            <h2 style="color:#eb5424;font-size:1.3em;margin-bottom:18px;">Grade Calculator</h2>
            <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 18px;">
                <label for="grade-type" style="font-size: 1.08em; color: #222; font-weight: 500;">Select grade type</label>
                <div class="grade-type-segment" id="grade-type-segment">
                    <button type="button" id="btn-percentage" class="active" onclick="setGradeType('percentage')">Percentage</button>
                    <button type="button" id="btn-letter" onclick="setGradeType('letter')">Letters</button>
                    <button type="button" id="btn-points" onclick="setGradeType('points')">Points</button>
                </div>
                <input type="hidden" id="grade-type" value="percentage">
            </div>
            <div class="input-section">
                <form id="grade-form" onsubmit="event.preventDefault(); calculateGrade();">
                    <table class="grade-table" id="grade-table">
                        <thead>
                            <tr>
                                <th>Assignment</th>
                                <th id="grade-header">Grade (%)</th>
                                <th id="weight-header">Weight</th>
                                <th>Remove</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Rows will be inserted by JS -->
                        </tbody>
                    </table>
                    <button class="btn-add" type="button" onclick="addRow()">+ Add Row</button>
                    <div class="buttons">
                        <button class="btn-calculate" type="submit">Calculate</button>
                        <button class="btn-clear" type="button" onclick="clearTable()">Clear</button>
                    </div>
                </form>
            </div>
            <div class="result-section" id="result-section" style="display:none;">
                <h2>Result</h2>
                <p>Weighted average grade: <span class="value" id="grade-value">0.00%</span></p>
                <div id="calc-details" style="color:#666;font-size:0.98em;margin-top:10px;"></div>
            </div>
        </div>

        <!-- Final Grade Calculator Section -->
        <div id="section-final" style="display:none;">
            <h2 style="color:#eb5424;font-size:1.3em;margin-bottom:18px;">Final Grade Calculator</h2>
            <div class="input-section" style="max-width: 500px; margin: 0 auto;">
                <form id="final-form" onsubmit="event.preventDefault(); calculateFinalGrade();" autocomplete="off">
                    <div style="display: flex; align-items: center; margin-bottom: 18px;">
                        <label for="current-grade" style="flex:1; font-size:1.08em; color:#222; font-weight:500;">Current grade</label>
                        <div style="display:flex;align-items:center;gap:0;">
                            <input type="number" id="current-grade" min="0" max="100" step="0.01" style="width:110px; border-radius:6px 0 0 6px; border:1px solid #ccc; padding:8px 10px; font-size:1em;">
                            <span style="background:#f5f5f5; border:1px solid #ccc; border-left:none; border-radius:0 6px 6px 0; padding:8px 14px; font-size:1em; color:#888;">%</span>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; margin-bottom: 18px;">
                        <label for="target-final-grade" style="flex:1; font-size:1.08em; color:#222; font-weight:500;">Target grade that you want to get in the class</label>
                        <div style="display:flex;align-items:center;gap:0;">
                            <input type="number" id="target-final-grade" min="0" max="100" step="0.01" style="width:110px; border-radius:6px 0 0 6px; border:1px solid #ccc; padding:8px 10px; font-size:1em;">
                            <span style="background:#f5f5f5; border:1px solid #ccc; border-left:none; border-radius:0 6px 6px 0; padding:8px 14px; font-size:1em; color:#888;">%</span>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; margin-bottom: 24px;">
                        <label for="final-weight" style="flex:1; font-size:1.08em; color:#222; font-weight:500;">Final exam weight</label>
                        <div style="display:flex;align-items:center;gap:0;">
                            <input type="number" id="final-weight" min="0" max="100" step="0.01" style="width:110px; border-radius:6px 0 0 6px; border:1px solid #ccc; padding:8px 10px; font-size:1em;">
                            <span style="background:#f5f5f5; border:1px solid #ccc; border-left:none; border-radius:0 6px 6px 0; padding:8px 14px; font-size:1em; color:#888;">%</span>
                        </div>
                    </div>
                    <div style="display:flex;gap:12px;justify-content:center;margin-bottom:24px;">
                        <button class="btn-calculate" type="submit" style="min-width:140px;">Calculate</button>
                        <button class="btn-clear" type="button" onclick="clearFinalForm()" style="min-width:120px;">Clear</button>
                    </div>
                    <div style="display: flex; align-items: center; margin-bottom: 0;">
                        <label style="flex:1; font-size:1.08em; color:#222; font-weight:500;">Final exam grade needed to get the target grade</label>
                        <div style="display:flex;align-items:center;gap:0;">
                            <input type="text" id="final-needed-grade" readonly style="width:110px; border-radius:6px 0 0 6px; border:1px solid #ccc; background:#f5f5f5; color:#222; font-size:1em; padding:8px 10px; font-weight:600;">
                            <span style="background:#f5f5f5; border:1px solid #ccc; border-left:none; border-radius:0 6px 6px 0; padding:8px 14px; font-size:1em; color:#888;">%</span>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- GPA Calculator Section -->
        <div id="section-gpa" style="display:none;">
            <h2 style="color:#eb5424;font-size:1.3em;margin-bottom:18px;">GPA Calculator</h2>
            <div class="input-section" style="max-width: 520px; margin: 0 auto;">
                <form id="gpa-form" onsubmit="event.preventDefault(); calculateGpa();">
                    <table class="grade-table" id="gpa-table" style="margin-bottom: 0;">
                        <thead>
                            <tr>
                                <th style="min-width:120px;">Course <span style="color:#888;font-weight:400;">(optional)</span></th>
                                <th style="min-width:70px;">Credits</th>
                                <th style="min-width:90px;">Grade</th>
                                <th>Remove</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- GPA rows will be inserted by JS -->
                        </tbody>
                    </table>
                    <button class="btn-add" type="button" onclick="addGpaRow()">+ Add Row</button>
                    <div class="buttons">
                        <button class="btn-calculate" type="submit">Calculate</button>
                        <button class="btn-clear" type="button" onclick="clearGpaTable()">Clear</button>
                    </div>
                </form>
                <div class="result-section" id="gpa-result-section" style="display:none;max-width:400px;margin:0 auto;">
                    <h2 style="font-size:1.1em;color:#eb5424;margin-bottom:10px;">Result</h2>
                    <div style="display:flex;align-items:center;gap:12px;">
                        <span style="font-size:1.08em;color:#222;font-weight:500;">GPA:</span>
                        <span class="value" id="gpa-value" style="font-size:1.25em;">0.00</span>
                    </div>
                </div>
            </div>
        </div>
                        
                        <div class="content-section">
                            <h2>Take Control of Your Grades with Our Grade Calculator 📊</h2>
                            
                            <p>Do you want to know what your final grades will be? Our Grade Calculator is perfect for students at any level. Whether you are in high school tracking your average HS GPA, preparing for exams, or planning your course load, this tool can help. You can enter your scores from assignments, exams, or total course points, and it will show your current and expected grades. It also works as a weighted average mark calculator or weighted mark calculator to account for different assignment weights. It saves time, reduces stress, and helps you plan your study strategy.</p>

                            <h3>How the Calculator Works and Why It Helps ⚙️</h3>
                            <p>The calculator works in a simple way. You input your earned points, total points, or percentages for each assignment or exam. It then calculates your overall grade. For example, if you need 46 questions to make a 70 percent score, the tool will show how that affects your final grade. You can also see your results as a 3.3 GPA letter grade or other letter grades. This helps you track progress and set realistic goals. Keep in mind that assignment weights and rounding rules can slightly affect results. Use this tool as a GPA calculator with weights or a weighted average mark calculator for one course or multiple courses. It helps you plan study sessions, prepare for finals, or check how much work you need to reach your GPA goals. You can also explore different scenarios with our Final Grade Calculator or CPA Grade Calculator to see what grades you need in upcoming assignments. Learn how to calculate weighted average for grades easily using this tool.</p>

                            <h3>Plan Ahead and Keep Your GPA on Track 🎯</h3>
                            <p>Don't leave your grades to chance. Our Grade Calculator gives you a clear picture of where you stand. You can see what it takes to keep a high GPA, convert numeric scores to a 3.3 GPA letter grade, or compare with the average HS GPA. Start using it now to plan your studies and track your progress. Check out our other calculators to manage your academic life easily. Stay on top of your grades and take control of your success today!</p>

                            <div class="faq-item">
                                <h3>FAQ: Your Most Common GPA Questions Answered 🎓</h3>
                                <div style="margin-bottom: 15px;">
                                    <p><strong>Q1: What is the average GPA in high school?</strong><br>
                                    A: The average HS GPA in the U.S. is usually around 3.0 on a 4.0 scale. This can vary by school, state, and grading system, but most students fall close to this average.</p>
                                </div>
                                <div style="margin-bottom: 15px;">
                                    <p><strong>Q2: How do you compute GPA?</strong><br>
                                    A: To compute GPA, assign each letter grade a numeric value (A = 4, B = 3, etc.), multiply it by the course credit, add up all the grade points, and divide by the total number of credits. This gives your overall GPA.</p>
                                </div>
                                <div style="margin-bottom: 15px;">
                                    <p><strong>Q3: What is a 3.3 GPA in letter grade?</strong><br>
                                    A: A 3.3 GPA typically corresponds to a B+ letter grade. It shows above-average performance and is often considered a strong GPA for college applications.</p>
                                </div>
                                <div style="margin-bottom: 15px;">
                                    <p><strong>Q4: How is weighted average calculated?</strong><br>
                                    A: A weighted average accounts for the importance of each grade. Multiply each grade by its weight (such as course credits), add the results, then divide by the sum of the weights. This is useful for honors, AP, or weighted courses.</p>
                                </div>
                                <div style="margin-bottom: 15px;">
                                    <p><strong>Q5: How do you find your high school GPA after graduation?</strong><br>
                                    A: You can calculate your GPA after graduation by collecting all your final grades and credits from transcripts. Use the same GPA formula—total grade points divided by total credits—to find your cumulative GPA.</p>
                                </div>
                                <div style="margin-bottom: 15px;">
                                    <p><strong>Q6: How do you get your cumulative GPA?</strong><br>
                                    A: Your cumulative GPA includes all courses you've taken. Add up all grade points from every class and divide by the total number of credits earned. This gives a complete picture of your academic performance.</p>
                                </div>
                            </div>
                        </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- END GRADE CALCULATOR -->

    <footer style="max-width: 800px; margin: 40px auto 0 auto; padding: 32px 0 0 0; text-align: center; color: #888; font-size: 1em;">
        <nav style="margin-bottom: 8px;">
            <a href="../about-us.html" style="color: #eb5424; text-decoration: none; margin: 0 18px; transition: color 0.2s;">About Us</a>
            <span style="color: #ccc;">|</span>
            <a href="../terms-of-use.html" style="color: #eb5424; text-decoration: none; margin: 0 18px; transition: color 0.2s;">Terms of Use</a>
            <span style="color: #ccc;">|</span>
            <a href="../privacy-policy.html" style="color: #eb5424; text-decoration: none; margin: 0 18px; transition: color 0.2s;">Privacy Policy</a>
        </nav>
        <div style="color: #bbb; font-size: 0.98em;">&copy; 2025 CalculatorQuote.com. All rights reserved.</div>
    </footer>
    <script>
    // --- Letter grade options and mapping (force correct order) ---
    const letterOptions = ['--', 'A+', 'A', 'A-', 'B+', 'B', 'B-', 'C+', 'C', 'C-', 'D+', 'D', 'D-', 'F'];
    const letterToPercent = {
        '--': 0,
        'A+': 98, 'A': 95, 'A-': 91,
        'B+': 88, 'B': 85, 'B-': 81,
        'C+': 78, 'C': 75, 'C-': 71,
        'D+': 68, 'D': 65, 'D-': 61,
        'F': 55
    };

    function letterGradeSelect(selected) {
        let html = `<select name="grade">`;
        for (const l of letterOptions) {
            html += `<option value="${l}"${selected === l ? ' selected' : ''}>${l}</option>`;
        }
        html += `</select>`;
        return html;
    }

    function addRow(name = '', grade = '', weight = '', maxGrade = '') {
        const tbody = document.getElementById('grade-table').getElementsByTagName('tbody')[0];
        const gradeType = document.getElementById('grade-type').value;
        let tr = document.createElement('tr');
        if (gradeType === 'letter') {
            tr.innerHTML = `
                <td><input type="text" name="name" placeholder="e.g. Homework 1" value="${name}"></td>
                <td>${letterGradeSelect(grade)}</td>
                <td><input type="number" name="weight" min="0" step="0.01" placeholder="e.g. 10" value="${weight}"></td>
                <td><button type="button" onclick="removeRow(this)" style="color:#f44336;background:none;border:none;font-size:1.2em;cursor:pointer;">✕</button></td>
            `;
        } else if (gradeType === 'percentage') {
            tr.innerHTML = `
                <td><input type="text" name="name" placeholder="e.g. Homework 1" value="${name}"></td>
                <td><input type="number" name="grade" min="0" max="100" step="1" placeholder="e.g. 92" value="${grade}"></td>
                <td><input type="number" name="weight" min="0" max="100" step="1" placeholder="e.g. 10" value="${weight}"></td>
                <td><button type="button" onclick="removeRow(this)" style="color:#f44336;background:none;border:none;font-size:1.2em;cursor:pointer;">✕</button></td>
            `;
        } else if (gradeType === 'points') {
            tr.innerHTML = `
                <td><input type="text" name="name" placeholder="e.g. Assignment" value="${name}"></td>
                <td><input type="number" name="grade" min="0" step="1" placeholder="e.g. 7" value="${grade}"></td>
                <td><input type="number" name="maxGrade" min="0" step="1" placeholder="e.g. 10" value="${maxGrade}"></td>
                <td><button type="button" onclick="removeRow(this)" style="color:#f44336;background:none;border:none;font-size:1.2em;cursor:pointer;">✕</button></td>
            `;
        }
        tbody.appendChild(tr);
    }

    function updatePointsTotalRow() {
        // 直接移除Total行，不再插入任何tr
        const totalRow = document.getElementById('points-total-row');
        if (totalRow) totalRow.remove();
    }

    function updateGradeType() {
        // Update table header
        const gradeType = document.getElementById('grade-type').value;
        document.getElementById('grade-header').textContent = gradeType === 'letter' ? 'Grade (Letter)' : (gradeType === 'points' ? 'Grade (points)' : 'Grade (%)');
        document.getElementById('weight-header').textContent = gradeType === 'points' ? 'Max Grade (optional)' : (gradeType === 'percentage' ? 'Weight' : 'Weight');
        // Update table columns for points type
        const thead = document.getElementById('grade-table').getElementsByTagName('thead')[0];
        if (gradeType === 'points') {
            thead.innerHTML = `<tr><th>Assignment (optional)</th><th>Grade (points)</th><th id="weight-header">Max Grade (optional)</th><th>Remove</th></tr>`;
        } else {
            thead.innerHTML = `<tr><th>Assignment</th><th id="grade-header">${gradeType === 'letter' ? 'Grade (Letter)' : (gradeType === 'points' ? 'Grade (points)' : 'Grade (%)')}</th><th id="weight-header">${gradeType === 'points' ? 'Max Grade (optional)' : (gradeType === 'percentage' ? 'Weight' : 'Weight')}</th><th>Remove</th></tr>`;
        }
        // Rebuild all rows
        const tbody = document.getElementById('grade-table').getElementsByTagName('tbody')[0];
        const rows = Array.from(tbody.getElementsByTagName('tr'));
        const data = rows.filter(row => !row.id || row.id !== 'points-total-row').map(row => {
            return {
                name: row.querySelector('input[name="name"]').value,
                grade: row.querySelector('select[name="grade"]') ? row.querySelector('select[name="grade"]').value : row.querySelector('input[name="grade"]') ? row.querySelector('input[name="grade"]').value : '',
                weight: row.querySelector('input[name="weight"]') ? parseFloat(row.querySelector('input[name="weight"]').value) || 0 : 0,
                maxGrade: row.querySelector('input[name="maxGrade"]') ? parseFloat(row.querySelector('input[name="maxGrade"]').value) || 0 : 0
            };
        });
        tbody.innerHTML = '';
        for (const d of data) addRow(d.name, d.grade, d.weight, d.maxGrade);
        updatePointsTotalRow();
    }

    function removeRow(btn) {
        const row = btn.parentNode.parentNode;
        row.parentNode.removeChild(row);
        updatePointsTotalRow();
    }

    function clearTable() {
        const tbody = document.getElementById('grade-table').getElementsByTagName('tbody')[0];
        tbody.innerHTML = '';
        addRow();
        document.getElementById('result-section').style.display = 'none';
        document.getElementById('calc-details').innerHTML = '';
        document.getElementById('needed-grade-result').innerHTML = '';
        updatePointsTotalRow();
    }

    function getRowsData() {
        const tbody = document.getElementById('grade-table').getElementsByTagName('tbody')[0];
        const gradeType = document.getElementById('grade-type').value;
        const rows = Array.from(tbody.getElementsByTagName('tr')).filter(row => !row.id || row.id !== 'points-total-row');
        return rows.map(row => {
            let grade = gradeType === 'letter' ? (row.querySelector('select[name="grade"]') ? row.querySelector('select[name="grade"]').value : '') : (row.querySelector('input[name="grade"]') ? row.querySelector('input[name="grade"]').value : '');
            if (gradeType === 'letter') grade = letterToPercent[grade] || 0;
            else grade = parseFloat(grade) || 0;
            const weight = row.querySelector('input[name="weight"]') ? parseFloat(row.querySelector('input[name="weight"]').value) || 0 : 0;
            const maxGrade = row.querySelector('input[name="maxGrade"]') ? parseFloat(row.querySelector('input[name="maxGrade"]').value) || 0 : 0;
            return { grade, weight, maxGrade };
        });
    }

    function calculateGrade() {
        const gradeType = document.getElementById('grade-type').value;
        const data = getRowsData();
        let totalWeighted = 0, totalWeight = 0, details = '';
        if (gradeType === 'points') {
            let sumPoints = 0, sumMax = 0;
            for (const d of data) {
                sumPoints += d.grade;
                sumMax += d.maxGrade;
            }
            let grade = 0;
            if (sumMax > 0) grade = sumPoints / sumMax * 100;
            document.getElementById('grade-value').textContent = grade.toFixed(2) + '%';
            document.getElementById('calc-details').innerHTML = `Weighted grade = (sum of points) / (sum of max grades) × 100 = (${sumPoints}) / (${sumMax}) × 100`;
        } else {
            if (gradeType === 'letter' || gradeType === 'percentage') {
                for (const d of data) {
                    totalWeighted += d.grade * d.weight;
                    totalWeight += d.weight;
                    details += `(${d.grade}×${d.weight}) + `;
                }
                details = details.replace(/ \+ $/, '');
                let grade = 0;
                if (totalWeight > 0) grade = totalWeighted / totalWeight;
                document.getElementById('grade-value').textContent = grade.toFixed(2) + '%';
                document.getElementById('calc-details').innerHTML = `Weighted grade = (${details.replace(/ \+ $/, '')}) / ${totalWeight}`;
            }
        }
        document.getElementById('result-section').style.display = 'block';
    }

    function calculateNeededGrade() {
        const gradeType = document.getElementById('grade-type').value;
        const data = getRowsData();
        let totalWeighted = 0, totalWeight = 0;
        if (gradeType === 'points') {
            for (const d of data) {
                totalWeighted += d.grade;
                totalWeight += d.weight;
            }
            const target = parseFloat(document.getElementById('target-average').value) || 0;
            const nextWeight = parseFloat(document.getElementById('target-weight').value) || 0;
            if (nextWeight <= 0) {
                document.getElementById('needed-grade-result').textContent = 'Please enter a valid next assignment weight.';
                return;
            }
            // Needed grade in points
            const needed = ((target/100)*(totalWeight+nextWeight) - totalWeighted);
            document.getElementById('needed-grade-result').textContent = `You need ${needed.toFixed(2)} points on the next assignment to reach your target average.`;
        } else {
            for (const d of data) {
                totalWeighted += d.grade * d.weight;
                totalWeight += d.weight;
            }
            const target = parseFloat(document.getElementById('target-average').value) || 0;
            const nextWeight = parseFloat(document.getElementById('target-weight').value) || 0;
            if (nextWeight <= 0) {
                document.getElementById('needed-grade-result').textContent = 'Please enter a valid next assignment weight.';
                return;
            }
            // Needed grade in percent
            const needed = ((target*(totalWeight+nextWeight) - totalWeighted)/nextWeight);
            document.getElementById('needed-grade-result').textContent = `You need ${needed.toFixed(2)}% on the next assignment to reach your target average.`;
        }
    }

    // Initialize
    window.onload = function() {
        addRow();
        showSection('grade');
        updateFinalGradeType();
        clearGpaTable();
        updatePointsTotalRow();
    };

    // --- Final Grade Calculator logic ---
    function updateFinalGradeType() {
        const type = document.getElementById('final-grade-type').value;
        const cg = document.getElementById('current-grade-input');
        const tg = document.getElementById('target-final-grade-input');
        if (type === 'letter') {
            cg.innerHTML = letterGradeSelectFinal('');
            tg.innerHTML = letterGradeSelectFinal('');
        } else {
            cg.innerHTML = `<input type='number' id='current-grade' min='0' max='100' step='0.01' style='width:100px;'>`;
            tg.innerHTML = `<input type='number' id='target-final-grade' min='0' max='100' step='0.01' style='width:100px;'>`;
        }
    }

    function letterGradeSelectFinal(selected) {
        let html = `<select id='current-grade'>`;
        for (const l of letterOptions) {
            html += `<option value='${l}'${selected === l ? ' selected' : ''}>${l}</option>`;
        }
        html += `</select>`;
        return html.replace('id=\'current-grade\'', 'id=\'current-grade\'') +
            `<select id='target-final-grade'>` +
            letterOptions.map(l => `<option value='${l}'>${l}</option>`).join('') +
            `</select>`;
    }

    function clearFinalForm() {
        document.getElementById('current-grade').value = '';
        document.getElementById('target-final-grade').value = '';
        document.getElementById('final-weight').value = '';
        document.getElementById('final-needed-grade').value = '';
    }

    function calculateFinalGrade() {
        const current = parseFloat(document.getElementById('current-grade').value) || 0;
        const target = parseFloat(document.getElementById('target-final-grade').value) || 0;
        const weight = parseFloat(document.getElementById('final-weight').value) || 0;
        if (weight <= 0 || weight > 100) {
            document.getElementById('final-needed-grade').value = 'N/A';
            return;
        }
        const w = weight / 100;
        const needed = (target - (1 - w) * current) / w;
        document.getElementById('final-needed-grade').value = needed.toFixed(2);
    }

    function showSection(section) {
        document.getElementById('section-grade').style.display = 'none';
        document.getElementById('section-final').style.display = 'none';
        document.getElementById('section-gpa').style.display = 'none';
        document.getElementById('tab-grade').classList.remove('active');
        document.getElementById('tab-final').classList.remove('active');
        document.getElementById('tab-gpa').classList.remove('active');
        document.getElementById('section-' + section).style.display = '';
        document.getElementById('tab-' + section).classList.add('active');
        if(section === 'gpa') {
            clearGpaTable();
        }
    }

    function setGradeType(type) {
        document.getElementById('grade-type').value = type;
        document.getElementById('btn-percentage').classList.remove('active');
        document.getElementById('btn-letter').classList.remove('active');
        document.getElementById('btn-points').classList.remove('active');
        if(type === 'percentage') document.getElementById('btn-percentage').classList.add('active');
        if(type === 'letter') document.getElementById('btn-letter').classList.add('active');
        if(type === 'points') document.getElementById('btn-points').classList.add('active');
        updateGradeType();
    }

    // GPA letter to points mapping (US 4.3 scale)
    const gpaLetterOptions = ['-', 'A+', 'A', 'A-', 'B+', 'B', 'B-', 'C+', 'C', 'C-', 'D+', 'D', 'D-', 'F'];
    const gpaLetterToPoints = {
        '-': null,
        'A+': 4.3, 'A': 4.0, 'A-': 3.7,
        'B+': 3.3, 'B': 3.0, 'B-': 2.7,
        'C+': 2.3, 'C': 2.0, 'C-': 1.7,
        'D+': 1.3, 'D': 1.0, 'D-': 0.7,
        'F': 0.0
    };
    function gpaGradeSelect(selected) {
        let html = `<select name="grade" style="width:100%;padding:7px 8px;font-size:1em;border-radius:4px;border:1px solid #ccc;">`;
        for (const l of gpaLetterOptions) {
            html += `<option value="${l}"${selected === l ? ' selected' : ''}>${l}</option>`;
        }
        html += `</select>`;
        return html;
    }
    function addGpaRow(name = '', credits = '', grade = '-') {
        const tbody = document.getElementById('gpa-table').getElementsByTagName('tbody')[0];
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td><input type="text" name="name" placeholder="e.g. Math" value="${name}"></td>
            <td><input type="number" name="credits" min="0" step="1" placeholder="e.g. 3" value="${credits}"></td>
            <td>${gpaGradeSelect(grade)}</td>
            <td><button type="button" onclick="removeGpaRow(this)" style="color:#f44336;background:none;border:none;font-size:1.2em;cursor:pointer;">✕</button></td>
        `;
        tbody.appendChild(tr);
    }
    function removeGpaRow(btn) {
        const row = btn.parentNode.parentNode;
        row.parentNode.removeChild(row);
    }
    function clearGpaTable() {
        const tbody = document.getElementById('gpa-table').getElementsByTagName('tbody')[0];
        tbody.innerHTML = '';
        addGpaRow();
        document.getElementById('gpa-result-section').style.display = 'none';
        document.getElementById('gpa-value').textContent = '0.00';
    }
    function getGpaRowsData() {
        const tbody = document.getElementById('gpa-table').getElementsByTagName('tbody')[0];
        const rows = Array.from(tbody.getElementsByTagName('tr'));
        return rows.map(row => {
            const name = row.querySelector('input[name="name"]').value;
            const credits = parseFloat(row.querySelector('input[name="credits"]').value) || 0;
            const grade = row.querySelector('select[name="grade"]').value;
            return { name, credits, grade };
        });
    }
    function calculateGpa() {
        const data = getGpaRowsData();
        let totalPoints = 0, totalCredits = 0;
        for (const d of data) {
            if (d.credits > 0 && gpaLetterToPoints[d.grade] !== null && d.grade !== '-') {
                totalPoints += d.credits * gpaLetterToPoints[d.grade];
                totalCredits += d.credits;
            }
        }
        let gpa = 0;
        if (totalCredits > 0) gpa = totalPoints / totalCredits;
        document.getElementById('gpa-value').textContent = gpa.toFixed(2);
        document.getElementById('gpa-result-section').style.display = 'block';
    }
    </script>

    <!-- JavaScript Files -->
    <script src="../js/jquery.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/imagesloaded.min.js"></script>
    <script src="../js/isotope.js"></script>
    <script src="../js/jquery.nav.js"></script>
    <script src="../js/smoothscroll.js"></script>
    <script src="../js/custom.js"></script>
</body>
</html> 